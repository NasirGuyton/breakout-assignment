(()=>{"use strict";class t{constructor(t,i,s,h,e,r){this.x=t,this.y=i,this.dx=s,this.dy=h,this.radius=e,this.color=r}render(t){t.beginPath(),t.arc(this.x,this.y,this.radius,0,2*Math.PI),t.fillStyle=this.color,t.fill(),t.closePath()}move(t,i){if((this.x+this.dx>t.width-this.radius||this.x+this.dx<this.radius)&&(this.dx=-this.dx),this.y+this.dy<this.radius)this.dy=-this.dy;else if(this.y+this.dy>t.height-this.radius){if(!(this.x>i.x&&this.x<i.x+i.width))return!0;this.dy=-this.dy}return this.x+=this.dx,this.y+=this.dy,!1}reset(t){this.x=t.width/2,this.y=t.height-30,this.dx=2,this.dy=-2}}class i{constructor(t,i,s,h,e){this.x=t,this.y=i,this.width=s,this.height=h,this.color=e,this.rightPressed=!1,this.leftPressed=!1}render(t){t.beginPath(),t.rect(this.x,this.y,this.width,this.height),t.fillStyle=this.color,t.fill(),t.closePath()}move(t){this.rightPressed&&this.x<t.width-this.width?this.x+=7:this.leftPressed&&this.x>0&&(this.x-=7)}reset(t){this.x=(t.width-this.width)/2}moveWithMouse(t,i){t>0&&t<i.width&&(this.x=t-this.width/2)}}class s{constructor(t,i,s,h,e,r){this.x=t,this.y=i,this.width=s,this.height=h,this.color=e,this.status=r}render(t){this.status&&(t.beginPath(),t.rect(this.x,this.y,this.width,this.height),t.fillStyle=this.color,t.fill(),t.closePath())}}class h{constructor(s){this.brickRowCount=3,this.brickColumnCount=5,this.brickWidth=75,this.brickHeight=20,this.brickPadding=10,this.brickOffsetTop=30,this.brickOffsetLeft=30,this.canvas=s,this.ctx=s.getContext("2d"),this.ball=new t(s.width/2,s.height-30,2,-2,10,"#0095DD"),this.paddle=new i((s.width-75)/2,s.height-10,75,10,"#0095DD"),this.score=0,this.lives=3,this.bricks=[],this.initializeBricks(),this.addEventListeners()}initializeBricks(){this.bricks=[];for(let t=0;t<this.brickColumnCount;t++){this.bricks[t]=[];for(let i=0;i<this.brickRowCount;i++){const h=t*(this.brickWidth+this.brickPadding)+this.brickOffsetLeft,e=i*(this.brickHeight+this.brickPadding)+this.brickOffsetTop;this.bricks[t][i]=new s(h,e,this.brickWidth,this.brickHeight,"#0095DD",1)}}}addEventListeners(){document.addEventListener("keydown",this.keyDownHandler.bind(this),!1),document.addEventListener("keyup",this.keyUpHandler.bind(this),!1),document.addEventListener("mousemove",this.mouseMoveHandler.bind(this),!1)}keyDownHandler(t){"Right"===t.key||"ArrowRight"===t.key?this.paddle.rightPressed=!0:"Left"!==t.key&&"ArrowLeft"!==t.key||(this.paddle.leftPressed=!0)}keyUpHandler(t){"Right"===t.key||"ArrowRight"===t.key?this.paddle.rightPressed=!1:"Left"!==t.key&&"ArrowLeft"!==t.key||(this.paddle.leftPressed=!1)}mouseMoveHandler(t){const i=t.clientX-this.canvas.offsetLeft;this.paddle.moveWithMouse(i,this.canvas)}collisionDetection(){for(let t=0;t<this.brickColumnCount;t++)for(let i=0;i<this.brickRowCount;i++){const s=this.bricks[t][i];s.status&&this.ball.x>s.x&&this.ball.x<s.x+s.width&&this.ball.y>s.y&&this.ball.y<s.y+s.height&&(this.ball.dy=-this.ball.dy,s.status=0,this.score++,this.score===this.brickRowCount*this.brickColumnCount&&(alert("YOU WIN, CONGRATULATIONS!"),this.restartGame()))}}restartGame(){this.ball.reset(this.canvas),this.paddle.reset(this.canvas),this.score=0,this.lives=3,this.initializeBricks()}draw(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.bricks.forEach((t=>t.forEach((t=>t.render(this.ctx))))),this.paddle.move(this.canvas),this.paddle.render(this.ctx),this.ball.render(this.ctx),this.collisionDetection(),this.ball.move(this.canvas,this.paddle)&&(this.lives--,0===this.lives?(alert("GAME OVER"),this.restartGame()):(this.ball.reset(this.canvas),this.paddle.reset(this.canvas))),requestAnimationFrame(this.draw.bind(this))}}document.addEventListener("DOMContentLoaded",(()=>{const t=document.getElementById("myCanvas");new h(t).draw()}))})();