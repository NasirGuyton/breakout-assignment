(()=>{"use strict";class t{constructor(t,i,e,s,h,r){this.x=t,this.y=i,this.width=e,this.height=s,this.color=h,this.status=r}render(t){this.status&&(t.beginPath(),t.rect(this.x,this.y,this.width,this.height),t.fillStyle=this.color,t.fill(),t.closePath())}}const i=document.getElementById("myCanvas"),e=i.getContext("2d"),s=new class{constructor(t){this.color=t}render(t,i){t.fillStyle=this.color,t.fillRect(0,0,i.width,i.height)}}("#eee"),h=new class{constructor(t,i,e,s,h,r){this.x=t,this.y=i,this.dx=e,this.dy=s,this.radius=h,this.color=r}render(t){t.beginPath(),t.arc(this.x,this.y,this.radius,0,2*Math.PI),t.fillStyle=this.color,t.fill(),t.closePath()}move(t,i){if((this.x+this.dx>t.width-this.radius||this.x+this.dx<this.radius)&&(this.dx=-this.dx),this.y+this.dy<this.radius)this.dy=-this.dy;else if(this.y+this.dy>t.height-this.radius){if(!(this.x>i.x&&this.x<i.x+i.width))return!0;this.dy=-this.dy}return this.x+=this.dx,this.y+=this.dy,!1}reset(t){this.x=t.width/2,this.y=t.height-30,this.dx=2,this.dy=-2}}(i.width/2,i.height-30,2,-2,10,"#0095DD"),r=new class{constructor(t,i,e,s,h){this.x=t,this.y=i,this.width=e,this.height=s,this.color=h,this.rightPressed=!1,this.leftPressed=!1}render(t){t.beginPath(),t.rect(this.x,this.y,this.width,this.height),t.fillStyle=this.color,t.fill(),t.closePath()}move(t){this.rightPressed&&this.x<t.width-this.width?this.x+=7:this.leftPressed&&this.x>0&&(this.x-=7)}reset(t){this.x=(t.width-this.width)/2}moveWithMouse(t,i){t>0&&t<i.width&&(this.x=t-this.width/2)}}((i.width-75)/2,i.height-10,75,10,"#0095DD"),o=new class{constructor(t,i,e,s){this.x=t,this.y=i,this.color=e,this.font=s,this.score=0}render(t){t.font=this.font,t.fillStyle=this.color,t.fillText(`Score: ${this.score}`,this.x,this.y)}update(t){this.score+=t}reset(){this.score=0}}(8,20,"#0095DD","16px Arial"),n=new class{constructor(t,i,e,s,h){this.x=t,this.y=i,this.color=e,this.font=s,this.lives=h}render(t){t.font=this.font,t.fillStyle=this.color,t.fillText(`Lives: ${this.lives}`,this.x,this.y)}loseLife(){this.lives--}reset(){this.lives=3}}(i.width-65,20,"#0095DD","16px Arial",3);let l=[],d=null,c=!0;function a(){l=[];for(let i=0;i<5;i++){l[i]=[];for(let e=0;e<3;e++){const s=85*i+30,h=30*e+30;l[i][e]=new t(s,h,75,20,"#0095DD",1)}}}function f(){d&&(cancelAnimationFrame(d),d=null),c=!1,setTimeout((()=>{h.reset(i),r.reset(i),o.reset(),n.reset(),a(),c=!0,d=requestAnimationFrame(y)}),1e3)}function y(){if(c){if(e.clearRect(0,0,i.width,i.height),s.render(e,i),l.forEach((t=>t.forEach((t=>t.render(e))))),r.move(i),r.render(e),o.render(e),n.render(e),h.render(e),function(){for(let t=0;t<5;t++)for(let i=0;i<3;i++){const e=l[t][i];e.status&&h.x>e.x&&h.x<e.x+e.width&&h.y>e.y&&h.y<e.y+e.height&&(h.dy=-h.dy,e.status=0,o.update(1),15===o.score&&(c=!1,alert("YOU WIN, CONGRATULATIONS!"),f()))}}(),h.move(i,r)){if(n.loseLife(),!(n.lives<=0))return d&&(cancelAnimationFrame(d),d=null),c=!1,void setTimeout((()=>{h.reset(i),r.reset(i),c=!0,d=requestAnimationFrame(y)}),1e3);c=!1,alert("GAME OVER"),f()}c&&(d=requestAnimationFrame(y))}}a(),document.addEventListener("keydown",(function(t){"Right"===t.key||"ArrowRight"===t.key?r.rightPressed=!0:"Left"!==t.key&&"ArrowLeft"!==t.key||(r.leftPressed=!0)}),!1),document.addEventListener("keyup",(function(t){"Right"===t.key||"ArrowRight"===t.key?r.rightPressed=!1:"Left"!==t.key&&"ArrowLeft"!==t.key||(r.leftPressed=!1)}),!1),document.addEventListener("mousemove",(function(t){const e=t.clientX-i.offsetLeft;r.moveWithMouse(e,i)}),!1),y()})();